{% extends 'base.html' %}
{% block title %}Editar Relatório{% endblock %}
{% block content %}
<h2 class="text-center">Editar Relatório</h2>
<form method="post" class="mt-4">
  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">Nome do Beneficiário</label>
      <input type="text" name="nome_beneficiario" class="form-control" value="{{ registro.nome_beneficiario or 'N/A' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">Data da Auditoria</label>
      <input type="date" name="data_auditoria" class="form-control"
             value="{{ registro.data_auditoria.strftime('%Y-%m-%d') if registro.data_auditoria else '' }}">
    </div>
  </div>

  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">Data e hora internação</label>
      <input type="datetime-local" name="data_internacao" class="form-control"
             value="{{ registro.data_internacao.strftime('%Y-%m-%dT%H:%M') if registro.data_internacao else '' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">Data e hora alta</label>
      <input type="datetime-local" name="data_alta" class="form-control"
             value="{{ registro.data_alta.strftime('%Y-%m-%dT%H:%M') if registro.data_alta else '' }}">
    </div>
  </div>

  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">Período da fatura - Início</label>
      <input type="date" name="periodo_fatura_inicio" class="form-control"
             value="{{ registro.fatura_de.strftime('%Y-%m-%d') if registro.fatura_de else '' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">Período da fatura - Fim</label>
      <input type="date" name="periodo_fatura_fim" class="form-control"
             value="{{ registro.fatura_ate.strftime('%Y-%m-%d') if registro.fatura_ate else '' }}">
    </div>
  </div>

  <div class="row mb-3">
    <div class="col-md-6">
      <label class="form-label">Total Apresentado (R$)</label>
      <input type="text" name="total_apresentado" class="form-control"
             value="{{ 'R$ {:.2f}'.format(registro.total_apresentado) if registro.total_apresentado is not none else 'N/A' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">Glosa Médico (R$)</label>
      <input type="text" name="total_glosa_medico" class="form-control"
             value="{{ 'R$ {:.2f}'.format(registro.total_glosa_medico) if registro.total_glosa_medico is not none else 'N/A' }}">
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-md-6">
      <label class="form-label">Glosa Enfermagem (R$)</label>
      <input type="text" name="total_glosa_enfermagem" class="form-control"
             value="{{ 'R$ {:.2f}'.format(registro.total_glosa_enfermagem) if registro.total_glosa_enfermagem is not none else 'N/A' }}">
    </div>
    <div class="col-md-6">
      <label class="form-label">Total Liberado (R$)</label>
      <input type="text" name="total_liberado" class="form-control"
             value="{{ 'R$ {:.2f}'.format(registro.total_liberado) if registro.total_liberado is not none else 'N/A' }}">
    </div>
  </div>

  <button type="submit" class="btn btn-primary">Salvar Alterações</button>
  <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}
